
HIGH (MVP) - CORE GAMEPLAY OVERHAUL

=== LAYOUT REDESIGN (Duel Links Style) ===

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Enemy Portrait] [Enemy Stats]  Energy: â– â– â– â–¡â–¡  â”‚  Y: 50-100 (compact)
â”‚      (small)        (compact)         7/10     â”‚
â”‚                                                 â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚              â”‚ ðŸ‚  ENEMY â”‚  Enemy staging area   â”‚  Y: 300
â”‚              â”‚   CARD   â”‚  (face-down)          â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                   VS                            â”‚  Y: 450 (center)
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚              â”‚ ðŸ‚  YOUR  â”‚  Your staging area    â”‚  Y: 600
â”‚              â”‚   CARD   â”‚  (face-down)          â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                 â”‚
â”‚ [Your Stats]   Energy: â– â– â– â– â–¡   [Your Portrait] â”‚  Y: 750-800 (compact)
â”‚   (compact)        4/10            (small)     â”‚
â”‚                                                 â”‚
â”‚           [CONFIRM PLAY]  â† appears on select  â”‚  Y: 850
â”‚  [Hand: 5 cards spread horizontally]           â”‚  Y: 900-1100
â”‚  [Card][Card][Card][Card][Card]                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Key UI Changes:**
- Enemy portrait: Left side at top
- Player portrait: Right side at bottom
- Stats: Horizontal bars next to portraits (was below)
- Energy: Top-right corner, visual dots (â– â– â– â–¡â–¡)
- Battle log: REMOVED from main view (can be toggle/overlay)
- Staging area: Central focus, larger cards
- Confirm button: Above hand (Y: 850) with high depth
- Hand: Bottom, slightly overlapping cards

**Components to Create:**
1. CompactPlayerInfo.js - Portrait + stats + energy in one component
2. StagingArea.js - Manages both face-down card slots
3. EnergyDisplay.js - Visual energy counter

**Benefits:**
âœ… More space for important info (cards, staging)
âœ… Cleaner, less cluttered
âœ… Mobile-friendly layout
âœ… Familiar to card game players

=== PHASE 1: SIMULTANEOUS CARD SYSTEM ===
âœ… Implement card selection (click = select, not play)
âœ… Card zoom/enlarge on selection with VIEW and CONFIRM buttons
âœ… Create face-down card staging area (center screen)
âœ… Lock in player card face-down
âœ… AI auto-selects card face-down
âœ… Both cards reveal simultaneously with delay
âœ… Fixed: Cards stacking/blur issue (proper cleanup)
=== PHASE 2: CARD TYPES & PRIORITY (1 hour) ===
Card Types (priority order):
[ ] COUNTER cards - Speed 10, can cancel opponent (Red border)
[ ] QUICK cards - Speed 7-9, fast but weak (Blue border)
[ ] NORMAL cards - Speed 4-6, balanced (Green border)
[ ] POWER cards - Speed 1-3, slow but devastating (Gold border)

[ ] Add cardType property to all cards
[ ] Add speed property to all cards
[ ] Implement priority resolution system
[ ] Update card visuals with color-coded borders
[ ] Show speed value on cards

=== PHASE 3: ENERGY SYSTEM (45 min) ===
[ ] Add energy counter UI (display below portrait for player stats for us and above foes stats for foe)
[ ] Start at 5 energy, +5 per turn, max 20
[ ] Add energyCost to all cards, modify colors based on energy type:
    - Counter: 2-3 energy
    - Quick: 3-4 energy
    - Normal: 4-5 energy
    - Power: 6-10 energy
[ ] Disable cards if not enough energy
[ ] Gray out unplayable cards
[ ] Show energy cost on cards
[ ] Add PASS button (appears when no affordable cards or player wants to skip turn)

=== PHASE 4: VISUAL FEEDBACK (30 min) ===
[ ] Show both cards face-down in center area
[ ] Flip animation for reveal
[ ] Highlight which card resolves first
[ ] Apply effects in priority order with delay
[ ] Show cancellation effects (if counter cancels card)
[ ] Floating stat change numbers

=== PHASE 5: IMPROVED HAND & DRAW (30 min) ===
[ ] Start with 5 cards instead of 3
[ ] Draw 2 cards per turn (instead of 1)
[ ] Max hand size: 10 cards
[ ] Show "discard" phase if over max
[ ] Deck counter UI
[ ] Reshuffle discard pile when deck empty

=== Music ===
Allow user to select between multiple background tracks during gameplay
[ ] Implement music selection menu
[ ] Add at least 2 background tracks

=== PHASE 6: ONLINE MULTIPLAYER (40-60 hours total) ===

=== Backend Setup (8-12 hours) ===
[ ] Create /server folder, install express + socket.io + cors
[ ] Set up Express server on port 3001 with CORS
[ ] Configure Socket.io connection handlers
[ ] Create matchmaking queue (FIFO array, pair when 2 players)
[ ] Create game rooms Map (roomId â†’ game state)
[ ] Server-side card validation:
    - Is card in player's hand?
    - Is it player's turn to play?
    - Has player already played this turn?
[ ] Handle disconnections (opponent wins if player leaves)

=== Game State Synchronization (10-15 hours) ===
[ ] Socket events: 'findMatch', 'selectCard', 'bothCardsSelected', 'gameOver'
[ ] Server shuffles decks, draws hands (don't trust client)
[ ] Server validates and processes both card plays
[ ] Server calculates stat changes and win/loss
[ ] Emit game state updates to both clients
[ ] Track turn state server-side

=== Frontend Network Layer (8-12 hours) ===
[ ] Create NetworkManager.js (socket.io-client)
[ ] Connect to server, emit/listen for events
[ ] Refactor BattleScene with isMultiplayer flag
[ ] Disable AI when multiplayer mode active
[ ] Send card selection to server, wait for response
[ ] Update UI from server game state (don't calculate locally)
[ ] Show "Waiting for opponent..." UI

=== Multiplayer Lobby UI (4-6 hours) ===
[ ] Create MultiplayerLobbyScene
[ ] Username input + character selection
[ ] "Find Match" button â†’ matchmaking queue
[ ] "Searching..." animation while waiting
[ ] Connection status indicator
[ ] Handle match found â†’ transition to BattleScene

=== Google Cloud Deployment (10-15 hours) ===
[ ] Create GCP project, enable billing
[ ] Install gcloud CLI, authenticate
[ ] Write Dockerfile for Node.js server
[ ] Deploy to Cloud Run: gcloud run deploy
[ ] Set up Firestore for user stats (optional)
[ ] Configure environment variables (CORS, production URL)
[ ] Update frontend to use production server URL
[ ] Test WebSocket/long-polling on Cloud Run
[ ] Set up monitoring, logging, billing alerts

=== Testing & Bug Fixes (5-10 hours) ===
[ ] Test locally with 2 browser windows
[ ] Test production with 2 devices (phone + laptop)
[ ] Handle edge cases: refresh, timeout, spam clicks
[ ] Latency testing and optimization

**ESTIMATED TOTAL: 45-70 hours (1-2 weeks full-time, 3-4 weeks part-time)**

**Cost: $0-5/month for first few months with free tier**

=== ALTERNATIVE: Hot-Seat Local Multiplayer (2-4 hours) ===
[ ] Add "Pass & Play" mode in menu
[ ] Both players use same device, take turns
[ ] "Pass Device" screen hides opponent's hand
[ ] No server, no networking, works offline
[ ] Perfect for quick friend demo


IN PROGRESS
[ ] Fix: Cards clickable during opponent turn (DONE - waiting for test)
DONE
âœ… Fix turn system - Player â†’ AI â†’ repeat
âœ… Battle log system
âœ… Side-by-side portrait layout
âœ… Character name changes (copyright-safe)
âœ… Cards blocked during opponent turn

POLISH (After Core Gameplay Works)

CARDS
[ ] Stat change floating numbers with animations
[ ] Add deck visual and pickup animation
[ ] Improve Card UI to look more like trading cards
[ ] Discard pile visualization
[ ] Prevent duplicate cards in hand
[ ] Card hover effects showing detailed info

LOG
[ ] Better formatting (bigger text, icons)
[ ] Color-code different message types
[ ] Show combo chains in log

CHARACTERS
[ ] Character passive skills (hover portrait to see)
[ ] Winning expression switch (when stats >75)
[ ] Losing expression switch (when stats <25)
[ ] Make enemy character slightly bigger
[ ] Add character skill descriptions

USER EXPERIENCE
[ ] Exit game screen/menu
[ ] Settings menu
[ ] Tutorial/help screen

ART
[ ] Better background themes
[ ] Particle effects for card plays
[ ] Screen shake for big moves

MEDIUM PRIORITY (Post-Launch Features)

AI
[ ] Improve AI intelligence for card type selection
[ ] AI energy management strategy
[ ] AI learns player patterns

CONTENT
[ ] Create 20-30 cards per character (currently 9)
[ ] Design character-specific field cards
[ ] Add card combo synergies
[ ] Card rarity system (common, rare, ultra rare)
[ ] Story mode with progression
[ ] Cutscenes between battles

CHARACTERS
[ ] Character selection screen improvements
[ ] More character choices (4+ characters)
[ ] Character unlock system
[ ] Generic stat slot system for different character types
    - Allow characters to have custom stat names (e.g., "Legal Power" vs "Evidence")
    - Cards use generic slots (slot1, slot2, etc.) that map to character-specific stats
    - Display layer translates slot names to actual stat names
    - Enables totally different character archetypes beyond Death Note theme

AUDIO
[ ] Background music
[ ] Card play sound effects
[ ] Stat change sounds
[ ] Win/lose music

GAME MODES
[ ] Ranked mode
[ ] Time limit per turn option
[ ] Best of 3 matches

LOW PRIORITY (Future Expansion)

ADVANCED FEATURES
[ ] Deck builder - custom 30-card decks
[ ] Collection system
[ ] Card unlocks/rewards
[ ] Multiple win conditions
[ ] Tournament mode

ART
[ ] Original sprite art (replace AI-generated)
[ ] Better win/lose animations
[ ] Card art for each card
[ ] Animated backgrounds

TECHNICAL
[ ] Mobile optimization
[ ] iOS/Android build with Capacitor
[ ] Save/load system
[ ] Cloud sync
ART
- sprites are cool but really I should make some original sprites
- better win animations
GAME MECHANICS
-multiplayer mode
-add deck visualizer

NOTES NOT AI GENERATED TO GENERATE
make everything that can be abstracted such as the battle log a modal that can be opened and closed